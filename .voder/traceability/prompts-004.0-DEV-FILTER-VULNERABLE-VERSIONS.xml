<?xml version="1.0" encoding="UTF-8"?>
<traceability>
  <specification>prompts/004.0-DEV-FILTER-VULNERABLE-VERSIONS.md</specification>
  <status>FAILED</status>
  <last_validated>2025-11-13T06:51:37.592Z</last_validated>
  <last_modified>2025-11-09T23:02:37.596Z</last_modified>
  <evidence>The implementation in src/filter-by-security.js and print-outdated.js only checks the single recommended (‘wanted’) version per package and filters it if vulnerable. There is no logic to retrieve multiple mature versions nor to “start from the newest mature version and work backwards until finding a safe one,” as required by the “Smart Checking” acceptance criterion. Tests (e.g., test/filter-by-security.test.js) likewise only cover single-version filtering and do not exercise or verify any fallback/search behavior.</evidence>
  <notes>Core vulnerability filtering and transitive-audit via npm audit are implemented and tested, and the CLI correctly omits vulnerable rows and prints a ‘no safe versions’ message when safeRows is empty. However, the story’s key requirement to iterate over mature versions—checking newer to older until a safe one is found—is not implemented.</notes>
</traceability>