<?xml version="1.0" encoding="UTF-8"?>
<traceability>
  <specification>prompts/004.0-DEV-FILTER-VULNERABLE-VERSIONS.md</specification>
  <status>FAILED</status>
  <last_validated>2025-11-12T15:53:18.351Z</last_validated>
  <last_modified>2025-11-09T23:02:37.596Z</last_modified>
  <evidence>Review of src/filter-by-security.js and src/print-outdated.js shows that only the latest version is checked for vulnerabilities and, if unsafe, the package is simply filtered out. There is no implementation of “smart checking” that would iterate backwards through older mature versions until a safe one is found. Additionally, the configurable severity thresholds (prodMinSeverity, devMinSeverity) are never applied to the audit result—the code filters any nonzero vulnerability count regardless of severity. No tests cover back-tracking to older versions or threshold logic.</evidence>
  <notes>Core vulnerability checking and output formatting are implemented, but the key requirement to search older mature versions until a safe one is found (REQ-SMART-SEARCH) and to respect severity thresholds is missing.</notes>
</traceability>