<?xml version="1.0" encoding="UTF-8"?>
<traceability>
  <specification>prompts/012.0-DEV-EXIT-CODE-REFINEMENT.md</specification>
  <status>PASSED</status>
  <last_validated>2025-11-14T00:49:05.502Z</last_validated>
  <last_modified>2025-11-11T08:04:07.339Z</last_modified>
  <evidence>1. Code implements exit codes 0, 1, and 2 in bin/dry-aged-deps.js (process.exit(0), process.exit(1), process.exit(2)) for no updates, updates available, and errors respectively.
2. CLI check‐mode tests in test/cli.check-mode.test.js cover:
   • exit code 0 when no updates (--check --format=json) → result.exitCode===0
   • exit code 1 when safe updates (--check with DRY_AGED_DEPS_MOCK) in table, JSON, and XML modes → result.exitCode===1
   • exit code 2 on invalid format flag (--format=bad) → result.exitCode===2
   • exit code 0 when outdated exist but none mature (--min-age=10000) → result.exitCode===0
3. Entry‐point tests in test/cli-entrypoint.test.js verify:
   • --help exits 0 and prints usage
   • --version exits 0 and prints version
   • invalid format flag exits 2 and prints error
4. Error handling tests:
   • test/cli.error-cmd.test.js validates exit code 2 when npm outdated returns non-JSON output
   • test/cli.format-json.error.test.js validates JSON error block and exit 2 on npm failure
5. Documentation:
   • README.md has “## Exit Codes” section listing codes 0,1,2 and stating consistency across formats
   • help text (in bin/dry-aged-deps.js) documents “--check … exit code 1 if safe updates available, 0 if none, 2 on error”
6. CI reports 150 tests passing, 96%+ coverage, linting and type checks clean, confirming backward compatibility and no regressions.</evidence>
  <notes>All acceptance criteria for exit code refinement (0=no updates, 1=updates available, 2=errors), consistency across table/JSON/XML, documentation in README and --help, comprehensive tests for success and error scenarios, and backward compatibility are fully satisfied.</notes>
</traceability>